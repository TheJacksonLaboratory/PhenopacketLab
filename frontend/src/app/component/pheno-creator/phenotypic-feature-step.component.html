<p-card>
    <as-split direction="horizontal">
        <as-split-area [size]="50">
            <!-- Phenotypic Feature table content & search -->
            <p-toast></p-toast>
            <p-card header="Phenotypic Features search" subheader="Search for a phenotypic feature using the search field below or the
                    text-mining tool (not yet implemented).">
                <p-tabView>
                    <p-tabPanel header="Feature search">
                        <app-search-box
                                [showHint]="false"
                                [itemName]="'Phenotypic feature'"
                                [searchLabel]="'Phenotypic feature'"
                                [placeHolderTxt]="'Enter a phenotypic feature name'"
                                [localStorageKey]="'phenotypic_features'"
                                [searchService]="searchService"
                                (selectedSearchItem)="onSearchCriteriaChange($event)"
                                [resetSearch]="false"
                        ></app-search-box>
                    </p-tabPanel>
                    <p-tabPanel header="Text-mining search">
                        <p>Not yet implemented</p>
                    </p-tabPanel>
                </p-tabView>

                <p-table
                        *ngIf="visible"
                        [value]="phenotypicFeatures"
                        [(selection)]="selectedFeature"
                        dataKey="key"
                        selectionMode="single"
                        (onRowSelect)="onRowSelect($event)"
                        [scrollable]="true"
                        [resizableColumns]="true"
                        [tableStyle]="{'min-width': '50rem'}">
                    <ng-template pTemplate="caption">
                        <div class="table-header">Added phenotypic features</div>
                    </ng-template>
                    <ng-template pTemplate="header">
                        <tr>
                            <th pResizableColumn>Label</th>
                            <th pResizableColumn>Status</th>
                            <!-- <th>Onset</th> -->
                            <th pResizableColumn></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-feature>
                        <tr [pSelectableRow]="feature">
                            <td>{{ feature.type?.label }}</td>
                            <td>{{ feature.excluded ? "Excluded" : "Observed" }}</td>
                            <!-- <td>{{feature.onset?.toString()}}</td> -->
                            <td>
                                <p-confirmDialog
                                        header="Confirmation"
                                        width="425"
                                ></p-confirmDialog>
                                <button
                                        pButton
                                        pRipple
                                        icon="pi pi-trash"
                                        class="p-button-rounded p-button-warning"
                                        (click)="deleteFeature(feature)"
                                ></button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </p-card>
        </as-split-area>
        <as-split-area [size]="50">
            <!-- Phenotypic feature form -->
            <p-card header="Phenotypic Feature details"
                    subheader="Select the phenotypic feature on the left-side table and then edit its details.">
                
                    <app-phenotypic-feature-edit [phenotypicFeature]="selectedFeature" (phenotypicFeatureChange)="updatePhenotypicFeature($event)"></app-phenotypic-feature-edit>

            </p-card>
        </as-split-area>
    </as-split>
    <ng-template pTemplate="footer">
        <div class="flex justify-content-between flex-wrap">
            <div class="flex align-items-center justify-content-center">
                <p-button
                        label="Back"
                        (onClick)="prevPage()"
                        icon="pi pi-angle-left"
                        iconPos="left"
                ></p-button>
            </div>
            <div class="flex align-items-center justify-content-center">
                <p-button
                        label="Next"
                        (onClick)="nextPage()"
                        icon="pi pi-angle-right"
                        iconPos="right"
                ></p-button>
            </div>
        </div>
    </ng-template>
</p-card>

<div class="grid p-fluid">
  <button
    pButton
    label="Add medical action"
    (click)="addMedicalAction()"
    icon="pi pi-plus"
    class="p-button-text ml-2"
    style="width: 20rem"
  ></button>
  <div class="field col-12">
    <p-table
      [value]="medicalActions"
      dataKey="key"
      styleClass="phenopacket-list-tabs"
    >
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 5rem"></th>
          <th></th>
          <th pResizableColumn style="min-width: 2rem">Action</th>
          <th pResizableColumn>ID</th>
          <th pResizableColumn>Treatment target</th>
          <th pResizableColumn>Treatment intent</th>
          <th></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-medicalaction let-expanded="expanded">
        <tr>
          <td>
            <button
              type="button"
              pButton
              pRipple
              [pRowToggler]="medicalaction"
              class="p-button-text p-button-rounded p-button-plain"
              [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"
            ></button>
          </td>
          <td>
            <mat-icon>
              {{ getIcon(medicalaction) }}
            </mat-icon>
          </td>
          <td>{{ getActionName(medicalaction) }}</td>
          <td>{{ getId(medicalaction) }}</td>
          <td>{{ getTarget(medicalaction) }}</td>
          <td>{{ getIntent(medicalaction) }}</td>
          <td>
            <button
              pButton
              pRipple
              icon="pi pi-pencil"
              class="p-button-rounded p-button-text"
              (click)="addMedicalAction(medicalaction)"
            ></button>
            <button
              pButton
              pRipple
              icon="pi pi-trash"
              class="p-button-rounded p-button-text p-button-warning"
              (click)="deleteMedicalAction(medicalaction)"
            ></button>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="rowexpansion" let-medicalaction>
        <tr>
          <td colspan="7">
            <div class="p-3">
              <app-medical-action-detail
                [medicalAction]="medicalaction"
                [diseases]="diseases"
              ></app-medical-action-detail>
            </div>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td [attr.colspan]="7">No medical action to display.</td>
        </tr>

        <tr></tr
      ></ng-template>
    </p-table>
  </div>
</div>
<p-confirmDialog header="Confirmation" width="425"></p-confirmDialog>
